---
title: 자동 견적 송장 만들기 구성
description: 이 항목은 견적 송장 자동 만들기 구성에 대한 정보를 제공합니다.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: e146dd510b3795d52d164fc6acf8e5400ba11310
ms.sourcegitcommit: 11a61db54119503e82faec5f99c4273e8d1247e5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/16/2020
ms.locfileid: "4079961"
---
# <a name="configure-automated-proforma-invoice-creation"></a><span data-ttu-id="308fa-103">자동 견적 송장 만들기 구성</span><span class="sxs-lookup"><span data-stu-id="308fa-103">Configure automated proforma invoice creation</span></span>

<span data-ttu-id="308fa-104">_**적용 대상:** 라이트 배포 - 견적 송장 거래_</span><span class="sxs-lookup"><span data-stu-id="308fa-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="308fa-105">Dynamics 365 Project Operations에서 자동 송장 생성을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="308fa-106">시스템은 각 프로젝트 계약 및 계약 내용에 대한 송장 일정을 기반으로 견적 송장 초안을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="308fa-107">송장 일정은 계약 내용 수준에서 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="308fa-108">계약의 각 라인에는 고유한 송장 일정이 있거나 동일한 송장 일정이 계약의 모든 라인에 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="308fa-109">송장을 생성할 때 시스템은 항상 프로젝트 계약당 하나 이상의 송장을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="308fa-110">경우에 따라 여러 개의 송장이 생성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="308fa-111">예를 들어 계약에 여러 고객이 있는 경우 해당 프로젝트 계약에 대해 청구할 청구 가능한 거래가 있는 고객 수와 동일한 수의 청구서가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="308fa-112">트랜잭션이 송장에 포함되는 방식 이해</span><span class="sxs-lookup"><span data-stu-id="308fa-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="308fa-113">때로는 각 프로젝트 기반 계약 내용이 별도의 송장 일정을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="308fa-114">예를 들어 Adatum 계약에 대한 구현 서비스에는 다음과 같은 계약 내용이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="308fa-115">2개의 수동 생성 중요 시점이 있는 고정 가격인 프로토타입 작업.</span><span class="sxs-lookup"><span data-stu-id="308fa-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="308fa-116">시간이 포함된 구현 작업은 월요일에 격주로 청구됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="308fa-117">매달 첫 번째 월요일에 청구해야 하는 발생 비용.</span><span class="sxs-lookup"><span data-stu-id="308fa-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="308fa-118">이 두 라인 항목 각각에 정의된 송장 일정은 다음 표와 같습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="308fa-119">계약 내용</span><span class="sxs-lookup"><span data-stu-id="308fa-119">Contract line</span></span> | <span data-ttu-id="308fa-120">송장 실행 날짜</span><span class="sxs-lookup"><span data-stu-id="308fa-120">Invoice run date</span></span> | <span data-ttu-id="308fa-121">거래 중단 날짜</span><span class="sxs-lookup"><span data-stu-id="308fa-121">Transaction cut-off date</span></span> | <span data-ttu-id="308fa-122">중요 시점 날짜</span><span class="sxs-lookup"><span data-stu-id="308fa-122">Milestone date</span></span> | <span data-ttu-id="308fa-123">중요 시점 금액</span><span class="sxs-lookup"><span data-stu-id="308fa-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="308fa-124">프로토타입 작업</span><span class="sxs-lookup"><span data-stu-id="308fa-124">Prototype work</span></span> | <span data-ttu-id="308fa-125">10월 5일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-125">October 5, Monday</span></span> | - | <span data-ttu-id="308fa-126">10월 5일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-126">October 5, Monday</span></span> | <span data-ttu-id="308fa-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="308fa-127">5000 USD</span></span> |
| - | <span data-ttu-id="308fa-128">11월 3일 화요일</span><span class="sxs-lookup"><span data-stu-id="308fa-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="308fa-129">11월 3일 화요일</span><span class="sxs-lookup"><span data-stu-id="308fa-129">November 3, Tuesday</span></span> | <span data-ttu-id="308fa-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="308fa-130">12,000 USD</span></span> |
| <span data-ttu-id="308fa-131">구현 작업</span><span class="sxs-lookup"><span data-stu-id="308fa-131">Implementation work</span></span> | <span data-ttu-id="308fa-132">10월 5일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-132">October 5, Monday</span></span> | <span data-ttu-id="308fa-133">10월 4일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="308fa-134">10월 19일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-134">October 19, Monday</span></span> | <span data-ttu-id="308fa-135">10월 18일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="308fa-136">11월 2일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-136">November 2, Monday</span></span> | <span data-ttu-id="308fa-137">11월 1일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="308fa-138">11월 16일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-138">November 16, Monday</span></span> | <span data-ttu-id="308fa-139">11월 15일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="308fa-140">발생한 비용</span><span class="sxs-lookup"><span data-stu-id="308fa-140">Expenses incurred</span></span> | <span data-ttu-id="308fa-141">10월 5일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-141">October 5, Monday</span></span> | <span data-ttu-id="308fa-142">10월 4일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="308fa-143">11월 2일 월요일</span><span class="sxs-lookup"><span data-stu-id="308fa-143">November 2, Monday</span></span> | <span data-ttu-id="308fa-144">11월 1일 일요일</span><span class="sxs-lookup"><span data-stu-id="308fa-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="308fa-145">이 예에서 자동 송장이 실행되는 경우:</span><span class="sxs-lookup"><span data-stu-id="308fa-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="308fa-146">**10월 4일 또는 그 이전 날짜** : 이러한 각 계약 내용에 대한 **송장 일정** 테이블이 10월 4일 일요일을 송장 실행 날짜로 부르지 않기 때문에 이 계약에 대해 송장이 생성되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-146">**October 4 or any date before** : No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="308fa-147">**10월 5일 월요일** : 다음에 대해 하나의 송장이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-147">**October 5 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="308fa-148">**송장 발부 준비 완료** 로 표시된 경우, 이정표를 포함하는 프로토타입 작업.</span><span class="sxs-lookup"><span data-stu-id="308fa-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="308fa-149">**송장 발부 준비 완료** 로 표시된 트랜잭션 마감일인 10월 4일 일요일 이전에 생성된 모든 시간 트랜잭션을 포함하는 구현 작업.</span><span class="sxs-lookup"><span data-stu-id="308fa-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="308fa-150">**송장 발부 준비 완료** 로 표시된 트랜잭션 마감일인 10월 4일 일요일 이전에 생성된 모든 경비 트랜잭션을 포함하는 발생한 경비.</span><span class="sxs-lookup"><span data-stu-id="308fa-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="308fa-151">**10월 6일 또는 10월 19일 이전 날짜** : 이러한 각 계약 내용에 대한 **송장 일정** 이 10월 6일 또는 10월 19일 이전 날짜를 송장 실행 일자로 부르지 않기 때문에 이 계약에 대한 송장이 생성되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-151">**On October 6 or any date before October 19** : No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="308fa-152">**10월 19일, 월요일** : **송장 발부 준비 완료** 로 표시된 10월 18일 일요일 트랜잭션 마감일 이전에 생성된 모든 시간 트랜잭션을 포함하는 구현 작업에 대해 하나의 송장이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-152">**October 19, Monday** : One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="308fa-153">**11월 2일 월요일** : 다음에 대해 하나의 송장이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-153">**November 2 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="308fa-154">**송장 발부 준비 완료** 로 표시된 트랜잭션 마감일인 11월 1일 일요일 이전에 생성된 모든 시간 트랜잭션을 포함하는 구현 작업.</span><span class="sxs-lookup"><span data-stu-id="308fa-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="308fa-155">**송장 발부 준비 완료** 로 표시된 트랜잭션 마감일인 11월 1일 일요일 이전에 생성된 모든 경비 트랜잭션을 포함하는 발생한 경비.</span><span class="sxs-lookup"><span data-stu-id="308fa-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="308fa-156">**11월 3일 화요일** : **송장 발부 준비 완료** 와 같이 표시된 경우 12000 USD에 대한 중요 시점을 포함하는 프로토타입 작업에 대해 하나의 송장이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-156">**November 3, Tuesday** : One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="308fa-157">자동 송장 발행 구성</span><span class="sxs-lookup"><span data-stu-id="308fa-157">Configure automatic invoicing</span></span>

<span data-ttu-id="308fa-158">다음 단계를 완료하여 자동화된 송장 실행을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="308fa-159">**Project Operations** 에서 **설정** > **반복 송장 설정** 으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-159">In **Project Operations** , go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="308fa-160">일괄 처리 작업을 만들고 **Project Operations 생성 송장** 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="308fa-161">일괄 처리 작업의 이름에는 "송장 만들기"라는 단어가 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="308fa-162">**작업 유형** 필드에서 **없음** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="308fa-163">기본적으로 **일일 빈도** 및 **활성** 필드는 **예** 로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="308fa-164">**워크플로 실행** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-164">Select **Run Workflow**.</span></span> <span data-ttu-id="308fa-165">**레코드 보기** 대화 상자에는 세 가지 워크플로가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="308fa-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="308fa-166">ProcessRunCaller</span></span>
- <span data-ttu-id="308fa-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="308fa-167">ProcessRunner</span></span>
- <span data-ttu-id="308fa-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="308fa-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="308fa-169">**ProcessRunCaller** 를 선택한 다음 **추가** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-169">Select **ProcessRunCaller** , and then select **Add**.</span></span>
6. <span data-ttu-id="308fa-170">다음 대화 상자에서 **확인** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="308fa-171">**절전** 워크플로 뒤에 **프로세스** 워크플로가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="308fa-172">5단계에서 **ProcessRunner** 를 선택할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="308fa-173">그런 다음 **확인** 을 선택하면 **프로세스** 워크플로가 **절전** 워크플로를 뒤따릅니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-173">Then, when you select **OK** , a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="308fa-174">**ProcessRunCaller** 및 **ProcessRunner** 워크플로는 송장을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="308fa-175">**ProcessRunCaller** 는 **ProcessRunner** 를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="308fa-176">**ProcessRunner** 는 실제로 송장을 만드는 워크플로입니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="308fa-177">워크플로는 송장을 만들어야 하는 모든 계약 내용을 통해 해당 라인에 대한 송장을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="308fa-178">송장을 만들어야 하는 계약 내용을 확인하려면 작업 계약 내용에 대한 송장 실행 날짜를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="308fa-179">한 계약에 속한 계약 내용에 동일한 송장 실행 날짜가 있는 경우 트랜잭션은 두 개의 송장 라인이 있는 하나의 송장에 결합됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="308fa-180">송장을 만들 트랜잭션이 없는 경우 작업에서 송장 만들기를 건너뜁니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="308fa-181">**ProcessRunner** 가 완료되면 **ProcessRunCaller** 를 호출하고 종료 시간을 제공하면, 닫힙니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller** , provides the end time, and is closed.</span></span> <span data-ttu-id="308fa-182">그런 다음 **ProcessRunCaller** 는 지정된 종료 시간에서 24시간 동안 실행되는 타이머를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="308fa-183">타이머가 끝나면 **ProcessRunCaller가** 닫힙니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="308fa-184">송장을 만들기 위한 일괄 처리 작업은 되풀이 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="308fa-185">이 일괄 처리 프로세스가 여러 번 실행되는 경우 작업의 여러 인스턴스가 만들어지고 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="308fa-186">따라서 일괄 처리 프로세스를 한 번만 시작해야 하며 실행이 중지된 경우에만 다시 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="308fa-187">Project Operations에서 일괄 처리 송장 발행은 송장 스케줄에 의해 구성된 프로젝트 계약 내용에 대해서만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="308fa-188">고정 가격 청구 방법이 있는 계약 내용에는 이정표가 구성되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="308fa-189">시간 및 자재 청구 방법이 있는 프로젝트 계약 내용에는 날짜 기반 송장 일정을 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="308fa-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>
